import{registerComponent}from"helpers";import{WYATTElement}from"wyatt";registerComponent("hover-intent",class extends WYATTElement{constructor(){super({activeClass:"nav-item--expanded",elementSelector:".nav-item",mouseEnterDelay:100,mouseExitDelay:400,mouseSensitivity:7}),this.elements=this.querySelectorAll(this.config.elementSelector),this.previousPageX=0,this.previousPageY=0,this.currentPageX=0,this.currentPageY=0,this.elements.forEach((e=>{e.querySelector("[data-menu]")&&(e.mouseEnterDelay=void 0,e.mouseExitDelay=void 0,e.isActive=!1,e.addEventListener("mouseenter",this.handleMouseEnter.bind(this)),e.addEventListener("mouseleave",this.handleMouseLeave.bind(this)))})),this.addEventListener("mousemove",this.trackMouseMove)}trackMouseMove(e){this.currentPageX=e.pageX,this.currentPageY=e.pageY}handleMouseEnter(e){const t=e.currentTarget;t.isActive?clearTimeout(t.mouseExitDelay):(this.previousPageX=this.currentPageX,this.previousPageY=this.currentPageY,t.mouseEnterDelay=setTimeout((()=>{this.compareMousePosition(t)}),this.config.mouseEnterDelay))}handleMouseLeave(e){const t=e.currentTarget;clearTimeout(t.mouseEnterDelay),t.isActive&&(t.mouseExitDelay=setTimeout((()=>{this.removeActiveClass(t),t.isActive=!1}),this.config.mouseExitDelay))}compareMousePosition(e){const t=this.previousPageX-this.currentPageX,s=this.previousPageY-this.currentPageY;Math.sqrt(t*t+s*s)<this.config.mouseSensitivity?(clearTimeout(e.mouseExitDelay),e.isActive=!0,this.addActiveClass(e)):(this.previousPageX=this.currentPageX,this.previousPageY=this.currentPageY,e.mouseEnterDelay=setTimeout((()=>{this.compareMousePosition(e)}),this.config.mouseEnterDelay))}addActiveClass(e){e.setAttribute("expanded",!0),e.classList.add(this.config.activeClass)}removeActiveClass(e){e.setAttribute("expanded",!1),e.classList.remove(this.config.activeClass)}});