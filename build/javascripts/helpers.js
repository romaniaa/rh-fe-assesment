function isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}function deepMerge(e,...t){return t.forEach((t=>{if(t)for(const o in t)t.hasOwnProperty(o)&&(isObject(t[o])?(e[o]||(e[o]={}),deepMerge(e[o],t[o])):Array.isArray(t[o])?(Array.isArray(e[o])||(e[o]=[]),t[o].forEach(((t,r)=>{isObject(t)&&e[o][r]?deepMerge(e[o][r],t):e[o][r]=t}))):e[o]=t[o])})),e}function debounce(e,t){let o;return(...r)=>{clearTimeout(o),o=setTimeout((()=>e.apply(this,r)),t)}}async function asyncRequest(e,t,o={}){const r=deepMerge({responseFormat:"text",messageOptions:{type:"error"}},o);try{const o=await fetch(e,t),s=await o[r.responseFormat]();let n;if(o.ok)return s;if(s){n=`${o.url} responded with: ${s}`;const{description:e,errors:t}=JSON.parse(s),i=e||t;i&&createMessage(i,r.messageOptions)}else n=`${o.url} responded with status: ${o.status} and statusText: ${o.statusText}`;throw new Error(n)}catch(e){return window.console.log(e),!1}}function replaceDOM(e,t,o=t){const r=(new DOMParser).parseFromString(e,"text/html").querySelector(o),s=document.querySelectorAll(t);r&&s&&(executeScripts(r),s.forEach((e=>{e.outerHTML=r.outerHTML})))}function executeScripts(e){Array.from(e.querySelectorAll("script[src]")).map((({src:e,type:t})=>({src:e,type:t}))).filter(((e,t,o)=>t===o.findIndex((t=>t.src===e.src)))).forEach((e=>{const t=document.createElement("script");t.src=e.src,t.type=e.type,document.head.appendChild(t)}))}function getDimissMessageDelay(e,t){return Math.max(Math.min(50*e.length,t.maxDelay),t.minDelay)}function createMessage(e,t={}){const o=deepMerge(WYATT.config.createMessage.options,t),r=document.getElementById("message");document.querySelectorAll(o.appendPoint).forEach((t=>{const s=r.content.firstElementChild?.cloneNode(!0),n=s.querySelector("[data-text]");if(s.classList.add(`message--${o.type}`),n.innerHTML=e,t.appendChild(s),o.dismiss){const t=getDimissMessageDelay(e,o);setTimeout((()=>{s.dismiss()}),t)}}))}function registerComponent(e,t,o){customElements.get(e)||customElements.define(e,t,o)}function setRecentView(e,t){if(null===t)return;const o=JSON.parse(localStorage.getItem("wyattRecentViews"))||{product:[],collection:[],page:[],article:[]};if(!o[e].some((e=>e.id===t?.id))){const r={id:t.id,handle:t.handle,timestamp:Date.now()};o[e].unshift(r),localStorage.setItem("wyattRecentViews",JSON.stringify(o))}}function triggerEvent(e,t){const o=new CustomEvent(t);e.dispatchEvent(o)}const scrollLock={enable:()=>{const e=document.querySelector("body");e.dataset.scrollPosition=window.scrollY,e.style.overflow="hidden",e.style.position="fixed",e.style.top=`-${e.dataset.scrollPosition}px`,e.style.width="100%"},disable:()=>{const e=document.querySelector("body");e.style.removeProperty("overflow"),e.style.removeProperty("position"),e.style.removeProperty("top"),e.style.removeProperty("width"),window.scrollTo({top:e.dataset.scrollPosition,left:0,behavior:"instant"}),e.dataset.scrollPosition=window.scrollY}},loading={add:e=>{const t=document.getElementById("loading"),o=t.content.firstElementChild?.cloneNode(!0),r=`loading-${Math.random().toString(16).slice(2)}`;e.style.position="relative",e.loaderID=r,o.id=r,e.appendChild(o)},remove:e=>{const t=e.querySelector(`#${e.loaderID}`);e.style.position="revert",t.remove()}};export{deepMerge,debounce,asyncRequest,replaceDOM,executeScripts,createMessage,registerComponent,scrollLock,loading,setRecentView,triggerEvent};